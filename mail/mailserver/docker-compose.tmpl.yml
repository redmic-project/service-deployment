version: '3.5'

services:
  mail-mailserver:
    image: hardware/mailserver:${IMAGE_TAG:-latest}
    domainname: ${DOMAIN_NAME} # Mail server A/MX/FQDN & reverse PTR = mail.domain.tld.
    hostname: mail-mailserver
    networks:
      - mail-net
    volumes:
      - mail-mailserver-vol:/var/mail
      - ${CERTIFICATES_PATH}:/etc/letsencrypt/live/mail-mailserver.${DOMAIN_NAME}
    environment:
      - REDIS_HOST
      - DBHOST
      - DBPASS # MariaDB database password (required)
      - RSPAMD_PASSWORD # Rspamd WebUI password (required)
      - ADD_DOMAINS # Add additional domains separated by commas (needed for dkim keys etc.)
    # - ENABLE_POP3=true # Enable POP3 protocol
    # - ENABLE_FETCHMAIL=true # Enable fetchmail forwarding
    # - DISABLE_CLAMAV=true # Disable virus scanning
    # - DISABLE_SIGNING=true # Disable DKIM/ARC signing
    # - DISABLE_GREYLISTING=true # Disable greylisting policy
    # - DISABLE_RATELIMITING=true # Disable ratelimiting policy
    #
    # Full list : https://github.com/hardware/mailserver#environment-variables
    #

networks:
  mail-net:
    external: true
